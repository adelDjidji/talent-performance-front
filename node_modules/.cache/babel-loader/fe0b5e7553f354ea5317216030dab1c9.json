{"ast":null,"code":"import _classCallCheck from \"/Users/mac/Documents/PFE/code/front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/mac/Documents/PFE/code/front/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/mac/Documents/PFE/code/front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/mac/Documents/PFE/code/front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/mac/Documents/PFE/code/front/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/mac/Documents/PFE/code/front/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/mac/Documents/PFE/code/front/src/containers/team.js\";\nimport React, { Component } from 'react';\nimport { Button, Icon, Select, Avatar, Spin } from 'antd';\nimport axios from 'axios';\nimport { Link } from \"react-router-dom\";\nimport UserCard from '../component/cardUser';\nvar Option = Select.Option;\n\nvar Team =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Team, _Component);\n\n  function Team(props) {\n    var _this;\n\n    _classCallCheck(this, Team);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Team).call(this, props));\n    _this.state = {\n      feathing: true,\n      selected_user: 0,\n      selected_manager: 0,\n      managers: [],\n      curent_manager: null,\n      collaborators: []\n    };\n\n    _this.charger_managers = function () {\n      console.log(\"get managers list\");\n      axios({\n        method: 'get',\n        baseURL: 'http://localhost:3005/user/managers',\n        headers: {\n          'Access-Control-Allow-Origin': '*'\n        }\n      }).then(function (response) {\n        if (response.data) {\n          //alert('geted managers list ')\n          _this.setState({\n            managers: response.data,\n            feathing: false\n          });\n        }\n      }).catch(function (error) {\n        console.log(error);\n      });\n    };\n\n    _this.clickCard = function (event, id) {\n      _this.setState({\n        selected_user: id\n      });\n    };\n\n    _this.load_collaborators = function (manager) {\n      console.log(\"gett collabtorator\");\n      var id_manager = manager;\n      var manager = null;\n\n      _this.setState({\n        selected_manager: id_manager\n      });\n\n      axios({\n        method: 'get',\n        baseURL: 'http://localhost:3005/user/collaborators/' + id_manager,\n        headers: {\n          'Access-Control-Allow-Origin': '*'\n        }\n      }).then(function (response) {\n        console.log(\"collaborators list :\");\n        console.log(response.data);\n\n        _this.setState({\n          collaborators: response.data\n        });\n\n        _this.state.managers.map(function (manager) {\n          if (manager.id_user == id_manager) {\n            console.log(\"COLLABS ===\", response.data);\n            manager = manager;\n\n            _this.setState({\n              curent_manager: manager\n            });\n          }\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n    };\n\n    _this.admin_view = function () {\n      // alert('admin')\n      var margin_manager = 0,\n          width_deviser = 0;\n\n      switch (_this.state.collaborators.length) {\n        case 0:\n          margin_manager = 0;\n          width_deviser = 0;\n          break;\n\n        case 1:\n          margin_manager = -12;\n          width_deviser = 0;\n          break;\n\n        case 2:\n          margin_manager = 37;\n          width_deviser = 175;\n          break;\n\n        case 3:\n          margin_manager = 161;\n          width_deviser = 347;\n          break;\n\n        case 4:\n          margin_manager = 245;\n          width_deviser = 520;\n          break;\n\n        case 5:\n          margin_manager = 333;\n          width_deviser = 693;\n          break;\n\n        default:\n          margin_manager = 415;\n          width_deviser = 865;\n      }\n\n      if (_this.state.feathing) return React.createElement(Spin, {\n        size: \"large\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      });else return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, _this.state.selected_manager == 0 ? React.createElement(\"img\", {\n        style: {\n          width: '20%',\n          display: 'block',\n          margin: '4% 14%'\n        },\n        src: \"assets/img/team1.png\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }) : \"\", React.createElement(Select, {\n        showSearch: true,\n        size: \"large\",\n        style: {\n          width: 500\n        },\n        placeholder: \"Choisir un manager\",\n        optionFilterProp: \"children\",\n        onChange: _this.load_collaborators,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, _this.state.managers.map(function (manager) {\n        return React.createElement(Option, {\n          key: manager.id_user,\n          value: manager.id_user,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137\n          },\n          __self: this\n        }, React.createElement(Avatar, {\n          src: \"assets/img/131.jpg\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137\n          },\n          __self: this\n        }), manager.firstname + \"  \", \"  \", manager.lastname);\n      })), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, _this.state.curent_manager ? React.createElement(\"div\", {\n        style: {\n          marginLeft: margin_manager\n        },\n        className: \"col col-lg-2 card-manager\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, \" \", React.createElement(UserCard, {\n        hoverable: true,\n        data: _this.state.curent_manager,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      })) : \"\"), React.createElement(\"div\", {\n        id: \"diviser\",\n        style: {\n          width: width_deviser\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"row\",\n        style: {\n          marginTop: 0\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, _this.state.collaborators.length > 0 ? _this.state.collaborators.map(function (collab) {\n        return React.createElement(Link, {\n          className: _this.state.selected_user === collab.id_user ? \"selected col col-lg-2 user-card\" : \"col col-lg-2 user-card\",\n          to: {\n            pathname: '/detail',\n            state: {\n              user_id: collab.id_user\n            }\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 148\n          },\n          __self: this\n        }, React.createElement(UserCard, {\n          hoverable: true,\n          data: collab,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 149\n          },\n          __self: this\n        }));\n      }) : _this.state.selected_manager != 0 ? React.createElement(\"div\", {\n        className: \"empty\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, \" \", React.createElement(Icon, {\n        type: \"cluster\",\n        theme: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      })) : \"\"));\n    };\n\n    _this.manager_view = function () {\n      //alert('manager')\n      var margin_manager = 0,\n          width_deviser = 0;\n\n      switch (_this.state.collaborators.length) {\n        case 0:\n          margin_manager = 0;\n          width_deviser = 0;\n          break;\n\n        case 1:\n          margin_manager = -12;\n          width_deviser = 0;\n          break;\n\n        case 2:\n          margin_manager = 37;\n          width_deviser = 175;\n          break;\n\n        case 3:\n          margin_manager = 161;\n          width_deviser = 347;\n          break;\n\n        case 4:\n          margin_manager = 245;\n          width_deviser = 520;\n          break;\n\n        case 5:\n          margin_manager = 333;\n          width_deviser = 693;\n          break;\n\n        default:\n          margin_manager = 415;\n          width_deviser = 865;\n      }\n\n      console.log(\"manager vieww\", _this.state.collaborators);\n      console.log(\" current user : \", _this.current_user);\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, _this.user_id ? React.createElement(\"div\", {\n        style: {\n          marginLeft: margin_manager\n        },\n        className: \"col col-lg-2 card-manager\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, \" \", React.createElement(UserCard, {\n        hoverable: true,\n        data: _this.current_user,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      })) : \"\"), React.createElement(\"div\", {\n        id: \"diviser\",\n        style: {\n          width: width_deviser\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"row\",\n        style: {\n          marginTop: 0\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, _this.state.collaborators.length > 0 ? _this.state.collaborators.map(function (collab) {\n        return React.createElement(Link, {\n          className: _this.state.selected_user === collab.id_user ? \"selected col col-lg-2 user-card\" : \"col col-lg-2 user-card\",\n          to: {\n            pathname: '/detail',\n            state: {\n              user_id: collab.id_user\n            }\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 191\n          },\n          __self: this\n        }, React.createElement(UserCard, {\n          hoverable: true,\n          data: collab,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 192\n          },\n          __self: this\n        }));\n      }) : _this.state.selected_manager != 0 ? React.createElement(\"div\", {\n        className: \"empty\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }, \" \", React.createElement(Icon, {\n        type: \"cluster\",\n        theme: \"outlined\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      })) : \"\"));\n    };\n\n    _this.clickCard = _this.clickCard.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.charger_managers = _this.charger_managers.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.load_collaborators = _this.load_collaborators.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.manager_view = _this.manager_view.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.admin_view = _this.admin_view.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.current_user = JSON.parse(sessionStorage.getItem('sessionCurrent'));\n    _this.user_id = _this.props.location.state != null ? _this.user_id = _this.props.location.state.user_id : _this.current_user.id_user;\n    return _this;\n  }\n\n  _createClass(Team, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      //alert('user id id :'+this.user_id)\n      if (sessionStorage.getItem('sessionAccess') != 0) {\n        this.setState({\n          selected_manager: this.user_id\n        });\n        this.load_collaborators(this.user_id);\n      } else this.charger_managers();\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {//alert(JSON.stringify(this.state))\n      //alert(this.state.selected_user)\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (sessionStorage.getItem('sessionAccess') == 0) return this.admin_view();else return this.manager_view();\n    }\n  }]);\n\n  return Team;\n}(Component);\n\nexport { Team as default };","map":{"version":3,"sources":["/Users/mac/Documents/PFE/code/front/src/containers/team.js"],"names":["React","Component","Button","Icon","Select","Avatar","Spin","axios","Link","UserCard","Option","Team","props","state","feathing","selected_user","selected_manager","managers","curent_manager","collaborators","charger_managers","console","log","method","baseURL","headers","then","response","data","setState","catch","error","clickCard","event","id","load_collaborators","manager","id_manager","map","id_user","admin_view","margin_manager","width_deviser","length","width","display","margin","firstname","lastname","marginLeft","marginTop","collab","pathname","user_id","manager_view","current_user","bind","JSON","parse","sessionStorage","getItem","location"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport {Button, Icon,Select, Avatar, Spin} from 'antd'\n\nimport axios from 'axios'\n\nimport { Link } from \"react-router-dom\";\n\nimport UserCard from '../component/cardUser'\n\n\nconst Option = Select.Option;\n\n\nexport default class Team extends Component{\n    constructor(props) {\n        super(props);     \n        this.clickCard= this.clickCard.bind(this);\n        this.charger_managers= this.charger_managers.bind(this);\n        this.load_collaborators= this.load_collaborators.bind(this);\n        this.manager_view= this.manager_view.bind(this);\n        this.admin_view= this.admin_view.bind(this);\n\n\n        this.current_user=JSON.parse(sessionStorage.getItem('sessionCurrent'))\n        this.user_id = this.props.location.state!=null?this.user_id = this.props.location.state.user_id:this.current_user.id_user\n    }\n    state={\n        feathing:true,\n        selected_user:0,\n        selected_manager:0,\n        managers:[],\n        curent_manager:null,\n        collaborators:[]\n    }\n\n\n    charger_managers=()=>{\nconsole.log(\"get managers list\")\n        axios({\n            method: 'get',\n            baseURL: 'http://localhost:3005/user/managers',\n            headers: {'Access-Control-Allow-Origin': '*'}\n            })\n        .then( (response)=> {\n            if(response.data){\n                //alert('geted managers list ')\n            this.setState({managers:response.data, feathing:false})\n            } \n        })\n        .catch(function (error) {\n            console.log(error);\n        });\n\n    }\n\n\n    componentWillMount(){\n        //alert('user id id :'+this.user_id)\n        if(sessionStorage.getItem('sessionAccess')!=0){\n            this.setState({selected_manager:this.user_id})\n            this.load_collaborators(this.user_id)\n        }\n        else this.charger_managers()\n    }\n\n    clickCard=(event, id)=>{\n        this.setState({selected_user:id})\n    }\n\n    componentDidMount(){\n        //alert(JSON.stringify(this.state))\n        //alert(this.state.selected_user)\n    }\n\n    load_collaborators= (manager)=>{\n        console.log(\"gett collabtorator\")\n        \n        var id_manager=manager\n        var manager=null\n        this.setState({selected_manager:id_manager})\n        axios({\n            method: 'get',\n            baseURL: 'http://localhost:3005/user/collaborators/'+id_manager,\n            headers: {'Access-Control-Allow-Origin': '*' }\n            })\n        .then( (response)=> {\n                console.log(\"collaborators list :\")\n                console.log(response.data)\n                this.setState({collaborators:response.data})\n                this.state.managers.map(manager=>{\n                    if(manager.id_user==id_manager) {\n                        console.log(\"COLLABS ===\",response.data)\n                        manager = manager\n                        this.setState({curent_manager:manager})\n                    }\n                })\n        })\n        .catch(function (error) {\n            console.log(error);\n        });\n    }\n\n    admin_view =()=>{\n       // alert('admin')\n        var margin_manager=0,width_deviser=0\n        switch(this.state.collaborators.length){\n               case 0:margin_manager=0; width_deviser=0\n                        break;\n                case 1: margin_manager=-12; width_deviser=0\n                        break;\n                case 2: margin_manager = 37; width_deviser=175\n                        break;\n                case 3: margin_manager = 161; width_deviser=347\n                        break;\n                case 4: margin_manager = 245; width_deviser=520\n                        break; \n                case 5: margin_manager = 333; width_deviser=693\n                        break;\n                default : margin_manager = 415 ; width_deviser=865            \n        }\n\n        if(this.state.feathing) return <Spin size=\"large\" />\n        else return (\n            <div>\n                {this.state.selected_manager==0?<img style={{width: '20%', display: 'block',margin: '4% 14%'}} src=\"assets/img/team1.png\"></img>:\"\"}\n                \n\n                <Select\n                    showSearch\n                    size='large'\n                    style={{ width: 500 }}\n                    placeholder=\"Choisir un manager\"\n                    optionFilterProp=\"children\"\n                    onChange={this.load_collaborators}\n                >\n                {this.state.managers.map(manager=><Option key={manager.id_user} value={manager.id_user}><Avatar src=\"assets/img/131.jpg\" />{manager.firstname+\"  \"}  {manager.lastname}</Option>)}\n                   \n                </Select>\n                \n                <p>{ this.state.curent_manager ?<div style={{marginLeft:margin_manager}} className=\"col col-lg-2 card-manager\"> <UserCard hoverable data={this.state.curent_manager} ></UserCard></div> :\"\"}</p>\n                <div id=\"diviser\" style={{width:width_deviser}} ></div>\n                <div className=\"row\" style={{marginTop:0}}>\n                    \n                    { this.state.collaborators.length>0?\n                        this.state.collaborators.map(collab=>{\n                        return ( \n                                <Link className={this.state.selected_user===collab.id_user? \"selected col col-lg-2 user-card\" :\"col col-lg-2 user-card\"} to={{ pathname: '/detail', state: { user_id: collab.id_user} }} >\n                                         <UserCard hoverable data={collab} ></UserCard>             \n                                </Link>\n                   )\n                    }):(this.state.selected_manager!=0?<div className=\"empty\"> <Icon type=\"cluster\" theme=\"outlined\" /></div>:\"\")}\n                       \n                </div>\n                \n                   \n                \n            </div>\n        )\n    }\n\n    manager_view=()=>{\n        //alert('manager')\n        var margin_manager=0,width_deviser=0\n        switch(this.state.collaborators.length){\n               case 0:margin_manager=0; width_deviser=0\n                        break;\n                case 1: margin_manager=-12; width_deviser=0\n                        break;\n                case 2: margin_manager = 37; width_deviser=175\n                        break;\n                case 3: margin_manager = 161; width_deviser=347\n                        break;\n                case 4: margin_manager = 245; width_deviser=520\n                        break; \n                case 5: margin_manager = 333; width_deviser=693\n                        break;\n                default : margin_manager = 415 ; width_deviser=865            \n        }\n        console.log(\"manager vieww\",this.state.collaborators)\n        console.log(\" current user : \",this.current_user)\n        return (\n            <div>\n                    <p>{ this.user_id ?<div style={{marginLeft:margin_manager}} className=\"col col-lg-2 card-manager\"> <UserCard hoverable data={this.current_user} ></UserCard></div> :\"\"}</p>\n                        <div id=\"diviser\" style={{width:width_deviser}} ></div>\n                    <div className=\"row\" style={{marginTop:0}}>\n                            \n                            { this.state.collaborators.length>0?\n                                this.state.collaborators.map(collab=>{\n                                return ( \n                                        <Link className={this.state.selected_user===collab.id_user? \"selected col col-lg-2 user-card\" :\"col col-lg-2 user-card\"} to={{ pathname: '/detail', state: { user_id: collab.id_user} }} >\n                                                <UserCard hoverable data={collab} ></UserCard>             \n                                        </Link>\n                        )\n                            }):(this.state.selected_manager!=0?<div className=\"empty\"> <Icon type=\"cluster\" theme=\"outlined\" /></div>:\"\")}\n                            \n                        </div>\n                </div>\n        )\n    }\n    render(){\n        if(sessionStorage.getItem('sessionAccess')==0)\n        return this.admin_view();\n        else return this.manager_view()\n    }\n}"]},"metadata":{},"sourceType":"module"}